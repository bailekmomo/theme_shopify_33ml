

{%- assign block_settings = block.settings -%}

<div
  id="ProductInformation-{{ section.id }}"
  class="
    product-details
    {% if block_settings.sticky_details_desktop %} sticky-content--desktop{% endif %}
    {% if block_settings.height == 'fill' -%} full-height--desktop{% endif -%}
  "
  style="--details-position: {{ block_settings.details_position }};"
  data-testid="product-information-details"
  {% if settings.transition_to_main_product %}
    data-view-transition-type="product-details"
  {% endif %}
>
  {% capture children %}
    <div class="view-product-title">
      <a
        href="{{ product.selected_or_first_available_variant.url }}"
        class="link"
      >
        {{- product.title }}
      </a>
    </div>
    {% content_for 'blocks' %}
        {% comment %} === D√âBUT CODE BUNDLE - √Ä AJOUTER ICI === {% endcomment %}
    {% if product.metafields.custom.bundle_discovery != blank or product.metafields.custom.travel_pack != blank %}
      <div class="product-bundles-wrapper" style="margin: 24px 0;">
        
        {% comment %} Bundle D√©couverte {% endcomment %}
        {% if product.metafields.custom.bundle_discovery != blank %}
          {% comment %} Compter les produits en stock {% endcomment %}
          {% assign available_products_count = 0 %}
          {% for product_ref in product.metafields.custom.bundle_discovery.value %}
            {% assign variant = product_ref.selected_or_first_available_variant %}
            {% assign is_available = false %}
            
            {% if variant.inventory_management == 'shopify' %}
              {% if variant.inventory_quantity > 0 or variant.inventory_policy == 'continue' %}
                {% assign is_available = true %}
              {% endif %}
            {% else %}
              {% if variant != null %}
                {% assign is_available = true %}
              {% endif %}
            {% endif %}
            
            {% if is_available %}
              {% assign available_products_count = available_products_count | plus: 1 %}
            {% endif %}
          {% endfor %}

          {% comment %} Afficher l'option seulement si au moins 2 produits en stock {% endcomment %}
          {% if available_products_count >= 2 %}
            <div class="bundle-option">
              <input 
                type="radio" 
                name="product-option-{{ section.id }}" 
                id="bundle-discovery-{{ section.id }}" 
                class="bundle-radio"
                value="bundle"
              >
              <label for="bundle-discovery-{{ section.id }}" class="bundle-label">
                <span class="bundle-icon">üéÅ</span>
                <div class="bundle-info">
                  <strong>Bundle D√©couverte (Pack de 3)</strong>
                  <span class="bundle-description">Ajoutez 2 autres parfums {{ product.type | downcase }} pour d√©couvrir notre collection</span>
                </div>
              </label>
            </div>

            <div id="bundle-discovery-products-{{ section.id }}" class="bundle-products" style="display: none;">
              <p class="bundle-instructions">S√©lectionnez 2 parfums suppl√©mentaires :</p>
              <div class="bundle-grid">
                {% for product_ref in product.metafields.custom.bundle_discovery.value %}
                  {% assign variant = product_ref.selected_or_first_available_variant %}
                  {% assign is_available = false %}
                  
                  {% if variant.inventory_management == 'shopify' %}
                    {% if variant.inventory_quantity > 0 or variant.inventory_policy == 'continue' %}
                      {% assign is_available = true %}
                    {% endif %}
                  {% else %}
                    {% if variant != null %}
                      {% assign is_available = true %}
                    {% endif %}
                  {% endif %}
                  
                  {% comment %} Afficher uniquement les produits en stock {% endcomment %}
                  {% if is_available %}
                    <div class="bundle-product-card">
                      <input 
                        type="checkbox" 
                        id="bundle-product-{{ product_ref.id }}-{{ section.id }}" 
                        class="bundle-checkbox"
                        data-product-id="{{ product_ref.id }}"
                        data-variant-id="{{ variant.id }}"
                        data-price="{{ product_ref.price }}"
                      >
                      <label for="bundle-product-{{ product_ref.id }}-{{ section.id }}">
                        {% if product_ref.featured_image %}
                          <img src="{{ product_ref.featured_image | img_url: 'small' }}" alt="{{ product_ref.title }}" loading="lazy">
                        {% endif %}
                        <div class="bundle-product-info">
                          <h4>{{ product_ref.title }}</h4>
                          <p class="price">{{ product_ref.price | money }}</p>
                        </div>
                      </label>
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
              <div class="bundle-total" id="bundle-total-{{ section.id }}" data-main-product-price="{{ product.price }}">
                <strong>Prix total du pack :</strong> <span class="bundle-total-price">{{ product.price | money }}</span>
              </div>
              <button type="button" class="button button--primary add-bundle-btn" disabled data-section-id="{{ section.id }}">
                Ajouter le Bundle D√©couverte
              </button>
            </div>
          {% endif %}
        {% endif %}

        {% comment %} Pack Voyageur {% endcomment %}
        {% if product.metafields.custom.travel_pack != blank %}
          <div class="bundle-option">
            <input 
              type="radio" 
              name="product-option-{{ section.id }}" 
              id="travel-pack-{{ section.id }}" 
              class="bundle-radio"
              value="travel"
            >
            <label for="travel-pack-{{ section.id }}" class="bundle-label">
              <span class="bundle-icon">‚úàÔ∏è</span>
              <div class="bundle-info">
                <strong>Pack Voyageur</strong>
                <span class="bundle-description">Format pratique pour vos d√©placements</span>
              </div>
            </label>
          </div>

          <div id="travel-pack-products-{{ section.id }}" class="bundle-products" style="display: none;">
            <div class="travel-pack-list">
              {% assign total_price = 0 %}
              {% for product_ref in product.metafields.custom.travel_pack.value %}
                {% assign total_price = total_price | plus: product_ref.price %}
                <div class="travel-pack-item">
                  {% if product_ref.featured_image %}
                    <img src="{{ product_ref.featured_image | img_url: 'small' }}" alt="{{ product_ref.title }}" loading="lazy">
                  {% endif %}
                  <div class="travel-pack-info">
                    <h4>{{ product_ref.title }}</h4>
                    <p class="price">{{ product_ref.price | money }}</p>
                  </div>
                  <input 
                    type="hidden" 
                    class="travel-pack-variant"
                    data-variant-id="{{ product_ref.selected_or_first_available_variant.id }}"
                  >
                </div>
              {% endfor %}
            </div>
            <div class="travel-pack-total">
              <strong>Total :</strong> {{ total_price | money }}
            </div>
            <button type="button" class="button button--primary add-travel-pack-btn" data-section-id="{{ section.id }}">
              Ajouter le Pack Voyageur
            </button>
          </div>
        {% endif %}

        {% comment %} Option produit seul {% endcomment %}
        <div class="bundle-option">
          <input 
            type="radio" 
            name="product-option-{{ section.id }}" 
            id="single-product-{{ section.id }}" 
            class="bundle-radio"
            value="single"
            checked
          >
          <label for="single-product-{{ section.id }}" class="bundle-label">
            <span class="bundle-icon">üîπ</span>
            <div class="bundle-info">
              <strong>Produit seul</strong>
              <span class="bundle-description">Acheter uniquement ce produit</span>
            </div>
          </label>
        </div>
      </div>

      <style>
        .product-bundles-wrapper {
          border-top: 1px solid rgba(var(--color-foreground), 0.08);
          padding-top: 20px;
        }

        .bundle-option {
          margin-bottom: 12px;
        }

        .bundle-radio {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .bundle-label {
          display: flex;
          align-items: center;
          padding: 14px 16px;
          border: 2px solid rgba(var(--color-foreground), 0.1);
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.25s ease;
          background: rgba(var(--color-background), 1);
        }

        .bundle-label:hover {
          border-color: rgba(var(--color-foreground), 0.3);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .bundle-radio:checked + .bundle-label {
          border-color: rgba(var(--color-foreground), 0.5);
          background: rgba(var(--color-foreground), 0.03);
        }

        .bundle-icon {
          font-size: 22px;
          margin-right: 14px;
          flex-shrink: 0;
        }

        .bundle-info {
          flex: 1;
        }

        .bundle-info strong {
          display: block;
          font-size: 15px;
          margin-bottom: 3px;
          font-weight: 600;
        }

        .bundle-description {
          font-size: 13px;
          color: rgba(var(--color-foreground), 0.65);
          display: block;
        }

        .bundle-products {
          margin: 12px 0 16px;
          padding: 18px;
          background: rgba(var(--color-foreground), 0.02);
          border-radius: 8px;
          border: 1px solid rgba(var(--color-foreground), 0.08);
        }

        .bundle-instructions {
          font-weight: 600;
          margin-bottom: 14px;
          font-size: 14px;
        }

        .bundle-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
          gap: 10px;
          margin-bottom: 16px;
        }

        @media screen and (min-width: 750px) {
          .bundle-grid {
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
          }
        }

        .bundle-product-card {
          position: relative;
        }

        .bundle-checkbox {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .bundle-product-card label {
          display: block;
          padding: 10px;
          border: 2px solid rgba(var(--color-foreground), 0.1);
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.25s ease;
          background: rgba(var(--color-background), 1);
          text-align: center;
          height: 100%;
        }

        .bundle-product-card label:hover {
          border-color: rgba(var(--color-foreground), 0.3);
          transform: translateY(-2px);
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
        }

        .bundle-checkbox:checked + label {
          border-color: rgba(var(--color-foreground), 0.5);
          background: rgba(var(--color-foreground), 0.03);
        }

        .bundle-product-card img {
          width: 100%;
          height: auto;
          aspect-ratio: 1;
          object-fit: cover;
          border-radius: 4px;
          margin-bottom: 8px;
        }

        .bundle-product-info h4 {
          font-size: 12px;
          margin-bottom: 5px;
          font-weight: 500;
          line-height: 1.3;
        }

        .bundle-product-info .price {
          font-size: 13px;
          font-weight: 600;
          color: rgba(var(--color-foreground), 0.8);
        }

        .travel-pack-list {
          margin-bottom: 16px;
        }

        .travel-pack-item {
          display: flex;
          align-items: center;
          padding: 10px;
          background: rgba(var(--color-background), 1);
          border-radius: 6px;
          margin-bottom: 8px;
          border: 1px solid rgba(var(--color-foreground), 0.08);
        }

        .travel-pack-item img {
          width: 55px;
          height: 55px;
          object-fit: cover;
          border-radius: 4px;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .travel-pack-info {
          flex: 1;
        }

        .travel-pack-info h4 {
          font-size: 13px;
          margin-bottom: 3px;
          font-weight: 500;
        }

        .travel-pack-info .price {
          font-size: 12px;
          color: rgba(var(--color-foreground), 0.7);
        }

        .travel-pack-total {
          text-align: right;
          font-size: 17px;
          padding: 14px;
          background: rgba(var(--color-background), 1);
          border-radius: 6px;
          margin-bottom: 14px;
          border: 1px solid rgba(var(--color-foreground), 0.08);
        }

        .bundle-total {
          text-align: right;
          font-size: 17px;
          padding: 14px;
          background: rgba(var(--color-background), 1);
          border-radius: 6px;
          margin-bottom: 14px;
          border: 1px solid rgba(var(--color-foreground), 0.08);
        }

        .bundle-total-price {
          color: rgba(var(--color-foreground), 0.9);
        }

        .add-bundle-btn,
        .add-travel-pack-btn {
          width: 100%;
          margin-top: 4px;
        }

        .add-bundle-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      </style>

      <script>
        (function() {
          const sectionId = '{{ section.id }}';
          const bundleRadios = document.querySelectorAll(`input[name="product-option-${sectionId}"]`);
          const bundleDiscoveryDiv = document.getElementById(`bundle-discovery-products-${sectionId}`);
          const travelPackDiv = document.getElementById(`travel-pack-products-${sectionId}`);
          
          if (!bundleRadios.length) return;

          // G√©rer l'affichage des options
          bundleRadios.forEach(radio => {
            radio.addEventListener('change', function() {
              if (bundleDiscoveryDiv) bundleDiscoveryDiv.style.display = 'none';
              if (travelPackDiv) travelPackDiv.style.display = 'none';

              if (this.value === 'bundle' && bundleDiscoveryDiv) {
                bundleDiscoveryDiv.style.display = 'block';
              } else if (this.value === 'travel' && travelPackDiv) {
                travelPackDiv.style.display = 'block';
              }
            });
          });

          // G√©rer la s√©lection des produits bundle d√©couverte
          const bundleCheckboxes = document.querySelectorAll(`#bundle-discovery-products-${sectionId} .bundle-checkbox`);
          const addBundleBtn = document.querySelector(`#bundle-discovery-products-${sectionId} .add-bundle-btn`);
          const bundleTotalPrice = document.querySelector(`#bundle-total-${sectionId} .bundle-total-price`);
          
          // Fonction pour calculer le prix total
          function calculateBundleTotal() {
            if (!bundleTotalPrice) return;
            
            // R√©cup√©rer le prix du produit principal depuis l'attribut data
            const bundleTotalDiv = document.getElementById(`bundle-total-${sectionId}`);
            let mainProductPrice = 0;
            
            if (bundleTotalDiv && bundleTotalDiv.dataset.mainProductPrice) {
              mainProductPrice = parseFloat(bundleTotalDiv.dataset.mainProductPrice) || 0;
            } else {
              // Fallback : essayer de r√©cup√©rer depuis le DOM
              const priceElement = document.querySelector('.product-price__current, [data-product-price], product-price');
              if (priceElement) {
                const priceText = priceElement.textContent || priceElement.innerText;
                // Extraire le nombre (g√©rer les formats avec virgule ou point)
                const priceMatch = priceText.match(/[\d\s,]+\.?\d*/);
                if (priceMatch) {
                  const priceValue = priceMatch[0].replace(/[\s,]/g, '').replace(',', '.');
                  mainProductPrice = parseFloat(priceValue) * 100; // Convertir en centimes
                }
              }
            }
            
            // Calculer le prix des produits s√©lectionn√©s
            const checkedBoxes = document.querySelectorAll(`#bundle-discovery-products-${sectionId} .bundle-checkbox:checked`);
            let selectedProductsPrice = 0;
            
            checkedBoxes.forEach(box => {
              const price = parseFloat(box.dataset.price) || 0;
              selectedProductsPrice += price;
            });
            
            // Calculer le total (les prix sont d√©j√† en centimes)
            const totalPrice = mainProductPrice + selectedProductsPrice;
            
            // Formater le prix en euros
            const priceInEuros = totalPrice / 100;
            
            // Mettre √† jour l'affichage avec formatage mon√©taire fran√ßais
            bundleTotalPrice.textContent = new Intl.NumberFormat('fr-FR', {
              style: 'currency',
              currency: 'EUR',
              minimumFractionDigits: 2
            }).format(priceInEuros);
          }
          
          if (bundleCheckboxes.length > 0 && addBundleBtn) {
            bundleCheckboxes.forEach(checkbox => {
              checkbox.addEventListener('change', function() {
                const checkedCount = document.querySelectorAll(`#bundle-discovery-products-${sectionId} .bundle-checkbox:checked`).length;
                addBundleBtn.disabled = checkedCount !== 2;
                
                // Mettre √† jour le prix total
                calculateBundleTotal();
              });
            });
            
            // Calculer le prix initial au chargement
            calculateBundleTotal();

            // Ajouter le bundle d√©couverte au panier
            addBundleBtn.addEventListener('click', function() {
              const checkedBoxes = document.querySelectorAll(`#bundle-discovery-products-${sectionId} .bundle-checkbox:checked`);
              const items = [];
              
              // Ajouter le produit principal
              const productForm = document.querySelector('form[action*="/cart/add"]');
              if (productForm) {
                const mainVariantId = productForm.querySelector('[name="id"]')?.value;
                if (mainVariantId) {
                  items.push({ id: mainVariantId, quantity: 1 });
                }
              }

              // Ajouter les produits s√©lectionn√©s
              checkedBoxes.forEach(box => {
                items.push({
                  id: box.dataset.variantId,
                  quantity: 1
                });
              });

              if (items.length > 0) {
                addBundleBtn.disabled = true;
                addBundleBtn.textContent = 'Ajout en cours...';
                
                fetch('/cart/add.js', {
                  method: 'POST',
                  headers: { 
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                  },
                  body: JSON.stringify({ items: items })
                })
                .then(response => response.json())
                .then(data => {
                  window.location.href = '/cart';
                })
                .catch(error => {
                  console.error('Erreur:', error);
                  addBundleBtn.disabled = false;
                  addBundleBtn.textContent = 'Ajouter le Bundle D√©couverte';
                  alert('Une erreur est survenue. Veuillez r√©essayer.');
                });
              }
            });
          }

          // Ajouter le pack voyageur au panier
          const addTravelPackBtn = document.querySelector(`#travel-pack-products-${sectionId} .add-travel-pack-btn`);
          
          if (addTravelPackBtn) {
            addTravelPackBtn.addEventListener('click', function() {
              const travelPackVariants = document.querySelectorAll(`#travel-pack-products-${sectionId} .travel-pack-variant`);
              const items = [];

              // Ajouter le produit principal
              const productForm = document.querySelector('form[action*="/cart/add"]');
              if (productForm) {
                const mainVariantId = productForm.querySelector('[name="id"]')?.value;
                if (mainVariantId) {
                  items.push({ id: mainVariantId, quantity: 1 });
                }
              }

              // Ajouter tous les produits du pack
              travelPackVariants.forEach(input => {
                items.push({
                  id: input.dataset.variantId,
                  quantity: 1
                });
              });

              if (items.length > 0) {
                addTravelPackBtn.disabled = true;
                addTravelPackBtn.textContent = 'Ajout en cours...';
                
                fetch('/cart/add.js', {
                  method: 'POST',
                  headers: { 
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                  },
                  body: JSON.stringify({ items: items })
                })
                .then(response => response.json())
                .then(data => {
                  window.location.href = '/cart';
                })
                .catch(error => {
                  console.error('Erreur:', error);
                  addTravelPackBtn.disabled = false;
                  addTravelPackBtn.textContent = 'Ajouter le Pack Voyageur';
                  alert('Une erreur est survenue. Veuillez r√©essayer.');
                });
              }
            });
          }
        })();
      </script>
    {% endif %}
    {% comment %} === FIN CODE BUNDLE === {% endcomment %}


  {% endcapture %}

  {% render 'group', children: children, settings: block_settings, shopify_attributes: block.shopify_attributes %}
</div>

{% stylesheet %}
  /* Clear padding on mobile, if not full-width */
  @media screen and (max-width: 749px) {
    .product-information.section--page-width .product-details > .group-block {
      padding-inline: 0;
    }
  }

  .view-product-title {
    display: none;
  }

  /* Container styles */
  .product-details {
    display: flex;
    align-self: start;
    justify-content: center;
  }

  @media screen and (min-width: 750px) {
    .product-details > .group-block {
      height: min-content;
    }

    .full-height--desktop {
      height: 100%;
      max-height: calc(100vh - var(--header-group-height, 0));
      min-height: fit-content;
    }

    .full-height--desktop .group-block {
      align-self: var(--details-position, 'flex-start');
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:names.details",
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    },
    {
      "type": "text"
    },
    {
      "type": "icon"
    },
    {
      "type": "image"
    },
    {
      "type": "button"
    },
    {
      "type": "video"
    },
    {
      "type": "group"
    },
    {
      "type": "spacer"
    },
    {
      "type": "accordion"
    },
    {
      "type": "product-recommendations"
    },
    {
      "type": "price"
    },
    {
      "type": "variant-picker"
    },
    {
      "type": "buy-buttons"
    },
    {
      "type": "product-description"
    },
    {
      "type": "review"
    },
    {
      "type": "accelerated-checkout"
    },
    {
      "type": "_divider"
    },
    {
      "type": "product-inventory"
    },
    {
      "type": "product-custom-property"
    },
    {
      "type": "product-intensity"
    }
  ],
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "t:content.size"
    },
    {
      "type": "select",
      "id": "width",
      "label": "t:settings.width",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "fill",
          "label": "t:options.fill"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fill"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:settings.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == 'custom' }}"
    },
    {
      "type": "select",
      "id": "width_mobile",
      "label": "t:settings.width_mobile",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "fill",
          "label": "t:options.fill"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fill"
    },
    {
      "type": "range",
      "id": "custom_width_mobile",
      "label": "t:settings.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_mobile == 'custom' }}"
    },
    {
      "type": "select",
      "id": "height",
      "label": "t:settings.height",
      "options": [
        {
          "value": "fit",
          "label": "t:options.fit_content"
        },
        {
          "value": "fill",
          "label": "t:options.fill"
        }
      ],
      "default": "fit"
    },
    {
      "type": "header",
      "content": "t:content.layout"
    },
    {
      "type": "select",
      "id": "details_position",
      "label": "t:settings.position",
      "options": [
        {
          "value": "flex-start",
          "label": "t:options.top"
        },
        {
          "value": "center",
          "label": "t:options.center"
        },
        {
          "value": "flex-end",
          "label": "t:options.bottom"
        }
      ],
      "default": "flex-start",
      "visible_if": "{{ block.settings.height == \"fill\" }}"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "t:settings.gap",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "checkbox",
      "id": "sticky_details_desktop",
      "label": "t:settings.make_details_sticky_desktop",
      "default": false
    },
    {
      "type": "header",
      "content": "t:content.appearance"
    },
    {
      "type": "checkbox",
      "id": "inherit_color_scheme",
      "label": "t:settings.inherit_color_scheme",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1",
      "visible_if": "{{ block.settings.inherit_color_scheme == false }}"
    },
    {
      "type": "select",
      "id": "background_media",
      "label": "t:settings.background_media",
      "options": [
        {
          "value": "none",
          "label": "t:options.none"
        },
        {
          "value": "image",
          "label": "t:options.image"
        },
        {
          "value": "video",
          "label": "t:options.video"
        }
      ],
      "default": "none"
    },
    {
      "type": "video",
      "id": "video",
      "label": "t:settings.video",
      "visible_if": "{{ block.settings.background_media == 'video' }}"
    },
    {
      "type": "select",
      "id": "video_position",
      "label": "t:settings.video_position",
      "options": [
        {
          "value": "cover",
          "label": "t:options.cover"
        },
        {
          "value": "contain",
          "label": "t:options.contain"
        }
      ],
      "default": "cover",
      "visible_if": "{{ block.settings.background_media == 'video' }}"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "t:settings.image",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "select",
      "id": "background_image_position",
      "label": "t:settings.image_position",
      "options": [
        {
          "value": "cover",
          "label": "t:options.cover"
        },
        {
          "value": "fit",
          "label": "t:options.fit"
        }
      ],
      "default": "cover",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "select",
      "id": "border",
      "label": "t:settings.borders",
      "options": [
        {
          "value": "none",
          "label": "t:options.none"
        },
        {
          "value": "solid",
          "label": "t:options.solid"
        }
      ],
      "default": "none"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 10,
      "step": 0.5,
      "unit": "px",
      "label": "t:settings.border_width",
      "default": 1,
      "visible_if": "{{ block.settings.border != 'none' }}"
    },
    {
      "type": "range",
      "id": "border_opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "t:settings.border_opacity",
      "default": 100,
      "visible_if": "{{ block.settings.border != 'none' }}"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "t:settings.border_radius",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "t:names.details",
      "settings": {
        "width": "custom",
        "custom_width": 100,
        "padding-block-start": 0,
        "padding-block-end": 0,
        "padding-inline-start": 0,
        "padding-inline-end": 0,
        "gap": 12,
        "inherit_color_scheme": true,
        "color_scheme": "",
        "video_position": "cover",
        "background_image_position": "cover",
        "border": "none",
        "border_width": 1,
        "border_opacity": 100
      },
      "blocks": {
        "text_TMtYp8": {
          "type": "text",
          "settings": {
            "text": "t:html_defaults.home_to_shirts",
            "alignment": "left",
            "padding-block-start": 16,
            "padding-inline-end": 0,
            "padding-block-end": 0,
            "padding-inline-start": 0
          }
        },
        "heading_m7KmQQ": {
          "type": "text",
          "settings": {
            "text": "<h1>{{ closest.product.title }}</h1>",
            "type_preset": "h2",
            "alignment": "left"
          }
        },
        "text_GMQR8L": {
          "type": "text",
          "settings": {
            "text": "t:html_defaults.reviews",
            "alignment": "left"
          }
        },
        "price_a7krng": {
          "type": "price",
          "settings": {
            "show_tax_info": true,
            "type_preset": "h4",
            "alignment": "left"
          }
        },
        "variant_picker_R3rGDr": {
          "type": "variant-picker",
          "settings": {
            "variant_style": "pills",
            "padding-block-start": 0,
            "padding-block-end": 8,
            "padding-inline-start": 0,
            "padding-inline-end": 0
          }
        },
        "buy_buttons_eYQEYi": {
          "type": "buy-buttons",
          "settings": {
            "padding-block-start": 0,
            "padding-block-end": 0,
            "padding-inline-start": 0,
            "padding-inline-end": 0
          },
          "blocks": {
            "add-to-cart": {
              "type": "add-to-cart",
              "static": true,
              "settings": {
                "style_class": "button-secondary"
              }
            },
            "accelerated-checkout": {
              "type": "accelerated-checkout",
              "static": true
            }
          },
          "block_order": []
        },
        "group_Q4eVWb": {
          "type": "group",
          "settings": {
            "width": "custom",
            "custom_width": 100,
            "padding-block-start": 8,
            "padding-block-end": 4,
            "padding-inline-start": 0,
            "padding-inline-end": 0,
            "content_direction": "column",
            "horizontal_alignment": "flex-start",
            "vertical_alignment": "center",
            "horizontal_alignment_flex_direction_column": "flex-start",
            "vertical_alignment_flex_direction_column": "center",
            "gap": 8,
            "inherit_color_scheme": true,
            "color_scheme": "",
            "video_position": "cover",
            "background_image_position": "cover",
            "border": "none",
            "border_width": 1,
            "border_opacity": 100
          },
          "blocks": {
            "group_Hrq6NU": {
              "type": "group",
              "settings": {
                "width": "custom",
                "custom_width": 100,
                "padding-block-start": 0,
                "padding-block-end": 0,
                "padding-inline-start": 0,
                "padding-inline-end": 0,
                "content_direction": "row",
                "horizontal_alignment": "flex-start",
                "vertical_alignment": "center",
                "horizontal_alignment_flex_direction_column": "flex-start",
                "vertical_alignment_flex_direction_column": "center",
                "gap": 12,
                "inherit_color_scheme": true,
                "color_scheme": "",
                "video_position": "cover",
                "background_image_position": "cover",
                "border": "none",
                "border_width": 1,
                "border_opacity": 100
              },
              "blocks": {
                "icon_bBpnME": {
                  "type": "icon",
                  "settings": {
                    "icon": "truck",
                    "width": 16
                  }
                },
                "text_83R7CQ": {
                  "type": "text",
                  "settings": {
                    "text": "t:html_defaults.free_shipping_over",
                    "alignment": "left",
                    "padding-block-start": 0,
                    "padding-block-end": 0,
                    "padding-inline-start": 0,
                    "padding-inline-end": 0
                  }
                }
              },
              "block_order": ["icon_bBpnME", "text_83R7CQ"]
            },
            "group_WbpVdV": {
              "type": "group",
              "settings": {
                "width": "custom",
                "custom_width": 100,
                "padding-block-start": 0,
                "padding-block-end": 0,
                "padding-inline-start": 0,
                "padding-inline-end": 0,
                "content_direction": "row",
                "horizontal_alignment": "flex-start",
                "vertical_alignment": "center",
                "horizontal_alignment_flex_direction_column": "flex-start",
                "vertical_alignment_flex_direction_column": "center",
                "gap": 12,
                "inherit_color_scheme": true,
                "color_scheme": "",
                "video_position": "cover",
                "background_image_position": "cover",
                "border": "none",
                "border_width": 1,
                "border_opacity": 100
              },
              "blocks": {
                "icon_FVd3C4": {
                  "type": "icon",
                  "settings": {
                    "icon": "return",
                    "width": 16
                  }
                },
                "text_EmGGUV": {
                  "type": "text",
                  "settings": {
                    "text": "t:html_defaults.free_returns",
                    "alignment": "left",
                    "padding-block-start": 0,
                    "padding-block-end": 0,
                    "padding-inline-start": 0,
                    "padding-inline-end": 0
                  }
                }
              },
              "block_order": ["icon_FVd3C4", "text_EmGGUV"]
            }
          },
          "block_order": ["group_Hrq6NU", "group_WbpVdV"]
        },
        "accordion": {
          "type": "accordion",
          "settings": {},
          "blocks": {
            "accordion-row-1": {
              "type": "_accordion-row",
              "settings": {
                "heading": "t:text_defaults.materials"
              },
              "blocks": {
                "text": {
                  "type": "text"
                }
              },
              "block_order": ["text"]
            },
            "accordion-row-2": {
              "type": "_accordion-row",
              "settings": {
                "heading": "t:text_defaults.care_instructions"
              },
              "blocks": {
                "text": {
                  "type": "text"
                }
              },
              "block_order": ["text"]
            },
            "accordion-row-3": {
              "type": "_accordion-row",
              "settings": {
                "heading": "t:text_defaults.fit"
              },
              "blocks": {
                "text": {
                  "type": "text"
                }
              },
              "block_order": ["text"]
            }
          },
          "block_order": ["accordion-row-1", "accordion-row-2", "accordion-row-3"]
        },
        "complementary_products": {
          "type": "product-recommendations",
          "settings": {
            "recommendation_type": "complementary"
          },
          "blocks": {
            "recommendations-header": {
              "type": "text",
              "settings": {
                "text": "t:html_defaults.styled_with",
                "type_preset": "h5"
              }
            }
          },
          "block_order": ["recommendations-header"]
        }
      },
      "block_order": [
        "text_TMtYp8",
        "heading_m7KmQQ",
        "text_GMQR8L",
        "price_a7krng",
        "variant_picker_R3rGDr",
        "buy_buttons_eYQEYi",
        "group_Q4eVWb",
        "accordion",
        "complementary_products"
      ]
    }
  ]
}
{% endschema %}
